# v1.0.0 Implementation Plan - Official Launch

# Goal Description
The goal of v1.0.0 is to transform the application from a simple portfolio tracker into a **Portfolio Analytics Dashboard**. This involves calculating performance metrics (PnL), visualizing history with charts, and ensuring the system is robust enough for public use.

## User Review Required
> [!IMPORTANT]
> **PnL Calculation**: Need to decide if we calculate PnL on-the-fly or background job. For v1.0.0, to keep it simple, we will try on-the-fly first, but might need caching.

## Proposed Changes

### 1. Analytics Engine (Backend)
- **New Service**: `AnalyticsService`
    - `calculate_portfolio_history(user_id, period)`: Generates daily net worth snapshots.
    - `calculate_pnl(user_id)`: (Current Value - Total Cost) / Total Cost.
- **API Endpoints**:
    - `GET /api/v1/analytics/portfolio/history`: Returns `[{date, value}, ...]`
    - `GET /api/v1/analytics/pnl`: Returns `{total_invested, current_value, pnl_percent, pnl_amount}`

### 2. Dashboard Visualization (Frontend)
- **Library**: Chart.js or Recharts (Svelte wrapper needed).
- **UI Components**:
    - `PortfolioChart.svelte`: Line chart showing value over time.
    - `PnLSummary.svelte`: Cards showing key metrics with green/red indicators.
- **Pages**:
    - Update `/dashboard` to include these new components.

### 3. Production Stability (DevOps)
- **Health Checks**: `/health` endpoint for LB.
- **HTTPS**: Certbot integration or instructions.
- **Process Management**: Ensure `supervisord` or `docker-compose` restart policies are `always`.

## Verification Plan

### Automated Tests
- **Backend**:
    - Unit tests for `AnalyticsService` with mocked price data.
    - Integration test for `/analytics` endpoints.
- **Frontend**:
    - Component check for Chart rendering (basic smoke test).

### Manual Verification
- **Visual Check**:
    - Verify charts render correctly with realistic data.
    - Verify PnL colors (Green for profit, Red for loss).
