# Node.js Current LTS 이미지 기반
FROM node:20-slim

# 작업 디렉토리 설정
WORKDIR /app

# package.json 복사
COPY package*.json ./

# 의존성 설치
RUN npm ci

# 애플리케이션 코드 복사
COPY . .

# 빌드 (SvelteKit)
RUN npm run build

# 포트 노출
EXPOSE 4173

# Preview 모드로 실행 (프로덕션 대용)
# Vite preview 기본 포트는 4173입니다.
CMD ["npm", "run", "preview", "--", "--host", "--port", "4173"]
