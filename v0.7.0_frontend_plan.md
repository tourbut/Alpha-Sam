# v0.7.0 Frontend Implementation Plan

## 개요
v0.7.0의 핵심 변경 사항인 **Multi-tenancy(다중 사용자 지원)**와 **Email Notifications(이메일 알림)** 기능을 프론트엔드에 반영하기 위한 구현 계획입니다. 현재 정식 인증(Login/Signup) 시스템이 없는 과도기적 단계이므로, 이를 시뮬레이션할 수 있는 개발 도구와 향후 확장에 대비한 UI 구조를 설계합니다.

## 1. Multi-tenancy Simulation (Dev User Switcher)

정식 로그인 기능(v0.8.0) 도입 전, 여러 사용자의 데이터 격리 기능을 테스트하고 검증하기 위해 **개발용 사용자 전환 도구**를 도입합니다.

### 1.1 `UserSwitcher` 컴포넌트 (Dev Mode Only)
- **위치**: Global Header 또는 화면 우측 하단 Floating Button (`process.env.NODE_ENV === 'development'` 일 감춤/보임 처리는 선택, 우선은 명시적으로 보이게 배치)
- **기능**:
    - 사전 정의된 사용자 목록 (예: User ID 1 (Admin), User ID 2 (Tester), User ID 3 (New User)) 선택 가능.
    - 사용자 선택 시:
        - localStorage에 `current_user_id` 저장.
        - 페이지 새로고침 또는 전역 상태(Store) 업데이트.
        - 이후 모든 API 요청 헤더에 `X-User-Id` (또는 백엔드가 요구하는 식별자)를 포함하여 요청.
        *(Note: 백엔드 API가 `X-User-Id` 헤더를 통해 사용자를 식별하도록 수정되었는지 확인 필요. 수정되지 않았다면 요청 사항에 추가.)*

### 1.2 API Client 수정
- API 호출 Wrapper (예: `src/lib/api.ts` 또는 유사 모듈)에서 `current_user_id`를 가져와 헤더에 주입하는 로직 추가.
- `Authorization` 헤더 대신 임시로 사용자 ID를 전달하는 방식 사용.

## 2. Notification Settings UI

사용자가 이메일 알림 수신 여부와 조건을 설정할 수 있는 "설정(Settings)" 페이지를 신설합니다.

### 2.1 메뉴 구조 변경
- 네비게이션(Nav)에 **"Settings" (설정)** 메뉴 추가.
- 또는 사용자 프로필 아이콘 클릭 시 드롭다운 메뉴에 "Settings" 추가.

### 2.2 설정 페이지 (`/settings`)
- **섹션 1: 프로필 (Profile)**
    - 사용자 이름, 이메일 주소 표시 (Read-only or Edit).
    - 현재는 Mock Data 또는 `current_user_id` 기반 조회.
- **섹션 2: 알림 설정 (Notification Preferences)**
    - **Daily Report**: 일일 포트폴리오 리포트 수신 여부 (Toggle Switch).
    - **Price Alerts**: 목표가 도달 시 알림 수신 여부 (Toggle Switch).
    - *저장 버튼*: 설정을 서버에 저장 (`POST /api/v1/users/me/settings` 예상).

## 3. Asset & Portfolio UI Updates

### 3.1 "My Assets" Filtering
- 기존 포트폴리오 뷰는 이미 사용자의 자산만 보여주도록 백엔드에서 필터링 될 것으로 예상되나, UI에서도 명확성을 더함.
- **Global vs Custom Asset 표시**:
    - 검색 결과나 자산 목록에서 "Global Asset"(관리자/시스템 생성)과 "Custom Asset"(사용자 생성)을 구분하는 뱃지(Badge) 또는 아이콘 추가 고려.
    - 예: 🏢(Global), 👤(Private).

## 4. Implementation Steps (Walkthrough)

### Step 1: User Context Setup
1. `src/store/userStore.ts` (또는 유사 Svelte Store) 생성: 현재 선택된 User ID 관리.
2. `UserSwitcher.svelte` 컴포넌트 구현 및 레이아웃(`+layout.svelte`)에 추가.
3. API 호출 함수(`fetch` wrapper)에 `userStore` 값 연동.

### Step 2: Settings Page Implementation
1. 라우트 생성: `src/routes/settings/+page.svelte`.
2. UI 스켈레톤 작성: Profile Section, Notification Section.
3. Mock API 연동: 백엔드 API가 준비되지 않았을 수 있으므로, 우선 Local Mock 또는 임시 API `GET/POST` 호출 구조 마련.

### Step 3: Global/Private Asset UI
1. 자산 목록 아이템 컴포넌트(`AssetItem.svelte` 등)에 `is_custom` 또는 `owner_id` 존재 여부에 따른 UI 구분 로직 추가.

## 5. Questions for Backend/Architect
- API 요청 시 사용자를 식별하기 위한 헤더 키값은 무엇인가요? (예: `x-user-id`?)
- 사용자 설정(Notification Settings)을 저장하고 불러올 API 엔드포인트가 확정되었나요? 아니면 v0.7.0 범위에 포함시켜야 하나요?
