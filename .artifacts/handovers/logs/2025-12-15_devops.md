# Handovers: To DevOps Engineer

## 날짜
2025-12-14

## 현재 상황 (Context)
- **v0.5.0 Features Complete**: Transaction Management & Portfolio History.
- **QA Status**: Passed ✅ (See `.artifacts/qa_reports/qa_result_v050.md`).
- **Database**: New migrations available (Transactions, PortfolioHistory models).

## 해야 할 일 (Tasks)
- **Deploy v0.5.0 to Production**:
    - Pull latest code (`main`).
    - Run Database Migrations: `alembic upgrade head`.
    - Rebuild/Restart Docker containers: `docker-compose -f docker-compose.prod.yml up -d --build`.
- **Sanity Check**:
    - Verify application is up and running.
    - Check if `/transactions` page loads.

## 기대 산출물 (Expected Outputs)
- Live v0.5.0 Production Environment.
- Deployment Log (optional).

## Execution Log (2025-12-15)
- **Configuration Changes**:
    - Created `.env.prod` with production settings (using `http://localhost`).
    - Updated `docker-compose.prod.yml` to use dedicated volumes (`postgres_data_prod`, `redis_data_prod`) to ensure a clean production environment and avoid password conflicts with dev.
    - Updated `backend/Dockerfile` to install `curl` in the final stage (required for healthchecks).
- **Deployment Steps Executed**:
    - `docker compose -f docker-compose.prod.yml --env-file .env.prod down` (Clean up)
    - `docker compose -f docker-compose.prod.yml --env-file .env.prod up -d --build` (Start services)
    - `docker compose -f docker-compose.prod.yml --env-file .env.prod exec backend alembic upgrade head` (Run migrations)
- **Verification Results**:
    - Nginx is up at `http://localhost:80`.
    - Frontend `/transactions` page returns 200 OK.
    - Backend API is reachable (checked via internal healthcheck and `/health` route).
