# Test Plan: v1.1.0 (Social & Automation)

## 1. 개요
v1.1.0 버전에서 추가되는 Social 기능(포트폴리오 공유, 리더보드) 및 Automation 기능(재밸런싱 알림, 페이퍼 트레이딩)에 대한 통합 테스트 계획입니다.

## 2. 테스트 범위

### 2.1. Social Features
| ID | 테스트 항목 | 상세 내용 | 기대 결과 |
|----|------------|----------|-----------|
| TC-SOC-01 | 공유 링크 생성 | 사용자가 포트폴리오 공유 버튼 클릭 시 UUID 기반 링크 생성 | 고유한 UUID 링크가 생성되어 클립보드에 복사됨 |
| TC-SOC-02 | 공유 권한 제어 | 링크 공개/비공개 설정 및 만료일 동작 확인 | 비공개 설정 시 외부인이 링크 접속 시 404/403 반환 |
| TC-SOC-03 | 노출 데이터 필터링 | 공유 설정(금액 숨기기, PnL만 노출 등) 반영 여부 | 설정된 JSON 값에 따라 특정 데이터가 마스킹되어 노출됨 |
| TC-SOC-04 | 리더보드 참여(Opt-in) | 프로필 설정에서 리더보드 노출 동의/철회 테스트 | 동의한 사용자만 리더보드 데이터(Redis)에 집계됨 |
| TC-SOC-05 | 랭킹 정확도 | 수익률(PnL%) 기준 Redis Sorted Set 정렬 검증 | 수익률이 높은 사용자가 상단에 정확히 위치함 |

### 2.2. Automation Features
| ID | 테스트 항목 | 상세 내용 | 기대 결과 |
|----|------------|----------|-----------|
| TC-AUT-01 | 재밸런싱 타겟 설정 | 자산별 목표 비중(%) 설정 및 저장 | 목표 비중의 총합이 100%인지 검증하고 DB에 저장됨 |
| TC-AUT-02 | 이격도 알림 트리거 | 가격 변동에 따른 이격도 임계값 돌파 시 알림 발생 | 설정된 임계값(예: 5%) 초과 시 알림 시스템(Celery) 작동 |
| TC-AUT-03 | 봇 전략 실행 | 정의된 전략(Buy/Sell logic)에 따른 시뮬레이션 | 5분 간격 스케줄링 태스크가 시장가를 조회하여 매매 판단 수행 |
| TC-AUT-04 | 페이퍼 트레이딩 기록 | 봇에 의한 가상 체결 건이 Transaction에 기록됨 | 실제 자산 반영이 아닌 `Paper` 타입의 트랜잭션으로 기록됨 |

## 3. 리그레션 테스트 (Regression)
기능 추가가 기존 영역에 미치는 영향을 최소화하기 위해 아래 항목을 상시 점검합니다.
- **Auth**: 공유 링크 접속 시 로그인 상태에 따른 차별화된 UI 처리 여부.
- **Portfolio**: 리더보드 PnL 계산이 실제 포트폴리오 가치 계산 로직과 일치하는지 확인.
- **Performance**: 대량의 사용자가 리더보드 조회 시 Redis 성능 및 API 응답 속도.

## 4. 기술적 검증 포인트
- **Redis Integration**: `ZADD` 명령어를 통한 리더보드 점수 갱신 주기 확인.
- **Celery Background Workers**: 백그라운드 태스크의 실패/재시도 로그 모니터링.
- **Data Integrity**: JSON 필드로 저장되는 공유 설정값이 프론트엔드에서 깨지지 않고 렌더링되는지 확인.

## 5. 일정 및 수행
- **수행 주체**: QA 엔지니어
- **환경**: Staging (PostgreSQL + Redis + Celery)
